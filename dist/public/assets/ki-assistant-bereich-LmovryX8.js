import{r as n,ai as N,j as e,B as j,aC as v,a2 as y,C as S,c as C,d as D,J as A,q as E,e as F,bx as P,_ as k,az as z}from"./index-Zh9LXilC.js";function L({bereich:o}){const[r,c]=n.useState([]),[a,h]=n.useState(""),[d,u]=n.useState(!1),[,b]=N(),p=n.useRef(null),m={1:{title:"Analyseportal – Regulatorische Informationen",description:"Fragen zu regulatorischen Änderungen, FDA, EMA, Compliance",color:"from-blue-600 to-blue-700",agents:["FDA","EMA","Compliance","General"]},2:{title:"Analyseportal – Zulassungen & Freigaben",description:"Fragen zu globalen Zulassungen, Freigabenmanagement, Timelines",color:"from-green-600 to-emerald-700",agents:["Global","Regional","Timeline","General"]},3:{title:"Analyseportal – Patentinformationen",description:"Fragen zu Patenten, IP-Strategien, Wettbewerbsanalyse, Prior Art",color:"from-purple-600 to-violet-700",agents:["Patent","IP Strategy","Competitors","Prior Art"]}}[o];n.useEffect(()=>{var t;(t=p.current)==null||t.scrollIntoView({behavior:"smooth"})},[r]);const f=async()=>{var i;if(!a.trim())return;const t={id:Date.now().toString(),role:"user",content:a,timestamp:new Date};c(s=>[...s,t]),h(""),u(!0);try{const s=await fetch("/api/chat/rag",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:a,bereich:o,context:r.slice(-5).map(l=>({role:l.role,content:l.content}))})});if(!s.ok)throw new Error("API request failed");const x=await s.json(),g={id:(Date.now()+1).toString(),role:"assistant",content:((i=x.data)==null?void 0:i.response)||"Entschuldigung, ich konnte keine Antwort generieren.",timestamp:new Date};c(l=>[...l,g])}catch(s){console.error("Error:",s);const x={id:(Date.now()+1).toString(),role:"assistant",content:"Fehler bei der Verarbeitung. Bitte versuchen Sie es später erneut.",timestamp:new Date};c(g=>[...g,x])}finally{u(!1)}},w=t=>{t.key==="Enter"&&!t.shiftKey&&(t.preventDefault(),f())};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:`bg-gradient-to-r ${m.color} rounded-xl p-8 text-white shadow-lg`,children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"flex items-center gap-2 mb-2",children:e.jsxs(j,{variant:"ghost",size:"sm",onClick:()=>b("/dashboard"),className:"text-white hover:bg-white/20",children:[e.jsx(v,{className:"h-4 w-4 mr-2"}),"Zurück"]})}),e.jsxs("h1",{className:"text-3xl font-bold mb-2 flex items-center gap-3",children:[e.jsx(y,{className:"h-8 w-8"}),m.title]}),e.jsxs("div",{className:"text-xs uppercase tracking-wide text-white/60 mb-2",children:["Stand: ",new Date().toLocaleDateString("de-DE")," • Neueste Inhalte zuerst"]}),e.jsx("p",{className:"text-white/80 text-lg",children:m.description})]})})}),e.jsxs(S,{className:"h-96 flex flex-col",children:[e.jsxs(C,{children:[e.jsxs(D,{className:"flex items-center gap-2",children:[e.jsx(A,{className:"h-5 w-5"}),"Bereich ",o," – Fach-Dialog"]}),e.jsx(E,{children:"Nutzen Sie den Dialog für spezialisierte Fachfragen."})]}),e.jsxs(F,{className:"flex-1 flex flex-col overflow-hidden",children:[e.jsxs("div",{className:"flex-1 overflow-y-auto mb-4 space-y-4",children:[r.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-500",children:[e.jsx(y,{className:"h-12 w-12 mb-2 opacity-50"}),e.jsx("p",{children:"Starten Sie eine Konversation mit dem System"})]}):[...r].sort((t,i)=>i.timestamp.getTime()-t.timestamp.getTime()).map(t=>e.jsx("div",{className:`flex ${t.role==="user"?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-xs lg:max-w-md px-4 py-2 rounded-lg ${t.role==="user"?"bg-blue-600 text-white":"bg-gray-100 text-gray-900"}`,children:[e.jsx("div",{children:t.content}),e.jsx("div",{className:"text-[10px] mt-1 opacity-60",children:t.timestamp.toLocaleString("de-DE")})]})},t.id)),d&&e.jsx("div",{className:"flex justify-start",children:e.jsxs("div",{className:"bg-gray-100 text-gray-900 px-4 py-2 rounded-lg flex items-center gap-2",children:[e.jsx(P,{className:"h-4 w-4 animate-spin"}),"Verarbeite Anfrage..."]})}),e.jsx("div",{ref:p})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(k,{value:a,onChange:t=>h(t.target.value),onKeyPress:w,placeholder:"Stellen Sie eine Frage...",disabled:d}),e.jsx(j,{onClick:f,disabled:d||!a.trim(),className:"bg-blue-600 hover:bg-blue-700",children:e.jsx(z,{className:"h-4 w-4"})})]})]})]})]})}export{L as A};
