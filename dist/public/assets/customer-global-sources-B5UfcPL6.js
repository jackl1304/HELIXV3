import{r as j,x as E,z as P,a as F,j as e,H as y,C as d,c as w,d as S,G,e as x,B as k,R as V,q as K,h as n,af as Q,n as H,k as W,V as M,Q as U,l as Z}from"./index-Zh9LXilC.js";import{S as u,a as f,b as v,c as N,d as a}from"./select-gtWyGZLW.js";import{C}from"./customer-navigation-B4gGF7xv.js";import{u as J}from"./use-live-tenant-permissions-pqtoXFLA.js";import"./index-mrnBHjv1.js";const O="030d3e01-32c4-4f95-8d54-98be948e8d4b";function ae(){const[r,T]=j.useState("all"),[i,D]=j.useState("all"),[c,A]=j.useState("all"),b=E().tenantId||O,{t:I}=P(),{permissions:R,tenantName:p,isLoading:L}=J({tenantId:b,pollInterval:3e3}),l=R||{dashboard:!0,regulatoryUpdates:!0,legalCases:!0,knowledgeBase:!0,newsletters:!0,analytics:!1,reports:!1,dataCollection:!1,globalSources:!0,historicalData:!1,administration:!1,userManagement:!1,systemSettings:!1,auditLogs:!1,aiInsights:!1,advancedAnalytics:!1},{data:m,isLoading:q}=F({queryKey:["/api/global-sources",b],queryFn:async()=>{const s=await fetch("/api/global-sources");if(!s.ok)throw new Error("Failed to fetch global sources");return await s.json()},enabled:!!(l!=null&&l.globalSources)});if(L)return e.jsx("div",{className:"flex h-screen bg-gray-50",children:e.jsx("div",{className:"flex items-center justify-center w-full",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})});if(!(l!=null&&l.globalSources))return e.jsxs("div",{className:"flex min-h-screen bg-gray-50 dark:bg-gray-900",children:[e.jsx("div",{className:"fixed top-4 right-4 z-50",children:e.jsx(y,{})}),e.jsx(C,{permissions:l,tenantName:p||"Customer Portal"}),e.jsx("main",{className:"ml-64 flex-1 flex items-center justify-center",children:e.jsxs(d,{className:"max-w-md",children:[e.jsx(w,{children:e.jsxs(S,{className:"flex items-center gap-2",children:[e.jsx(G,{className:"h-5 w-5"}),I("access.restricted")]})}),e.jsx(x,{children:e.jsx("p",{className:"text-muted-foreground",children:"Sie haben keine Berechtigung für den Zugriff auf Globale Datenquellen. Kontaktieren Sie Ihren Administrator für weitere Informationen."})})]})})]});const o=(m==null?void 0:m.filter(s=>{const t=r==="all"||s.region===r,h=i==="all"||s.status===i,g=c==="all"||s.type===c;return t&&h&&g}))||[],z=s=>{switch(s){case"active":return e.jsx(Z,{className:"w-5 h-5 text-green-500"});case"maintenance":return e.jsx(U,{className:"w-5 h-5 text-yellow-500"});case"error":return e.jsx(M,{className:"w-5 h-5 text-red-500"});default:return e.jsx(W,{className:"w-5 h-5 text-gray-500"})}},B=s=>{const t={active:"bg-green-100 text-green-800",inactive:"bg-gray-100 text-gray-800",maintenance:"bg-yellow-100 text-yellow-800",error:"bg-red-100 text-red-800"};return e.jsx(n,{className:t[s]||t.inactive,children:s})};return e.jsxs("div",{className:"flex min-h-screen bg-gray-50 dark:bg-gray-900",children:[e.jsx("div",{className:"fixed top-4 right-4 z-50",children:e.jsx(y,{})}),e.jsx(C,{permissions:l,tenantName:p||"Customer Portal"}),e.jsx("main",{className:"ml-64 flex-1 p-8 overflow-y-auto",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-6 mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Globale Datenquellen"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Übersicht über alle verfügbaren regulatorischen Datenquellen weltweit"})]}),e.jsxs(k,{variant:"outline",children:[e.jsx(V,{className:"w-4 h-4 mr-2"}),"Status aktualisieren"]})]}),e.jsx(d,{className:"mb-6",children:e.jsx(x,{className:"p-6",children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsx("div",{children:e.jsxs(u,{value:r,onValueChange:T,children:[e.jsx(f,{children:e.jsx(v,{placeholder:"Region"})}),e.jsxs(N,{children:[e.jsx(a,{value:"all",children:"Alle Regionen"}),e.jsx(a,{value:"europe",children:"Europa"}),e.jsx(a,{value:"north-america",children:"Nordamerika"}),e.jsx(a,{value:"asia-pacific",children:"Asien-Pazifik"}),e.jsx(a,{value:"global",children:"Global"})]})]})}),e.jsx("div",{children:e.jsxs(u,{value:i,onValueChange:D,children:[e.jsx(f,{children:e.jsx(v,{placeholder:"Status"})}),e.jsxs(N,{children:[e.jsx(a,{value:"all",children:"Alle Status"}),e.jsx(a,{value:"active",children:"Aktiv"}),e.jsx(a,{value:"maintenance",children:"Wartung"}),e.jsx(a,{value:"error",children:"Fehler"}),e.jsx(a,{value:"inactive",children:"Inaktiv"})]})]})}),e.jsx("div",{children:e.jsxs(u,{value:c,onValueChange:A,children:[e.jsx(f,{children:e.jsx(v,{placeholder:"Typ"})}),e.jsxs(N,{children:[e.jsx(a,{value:"all",children:"Alle Typen"}),e.jsx(a,{value:"api",children:"API"}),e.jsx(a,{value:"web-scraping",children:"Web-Scraping"}),e.jsx(a,{value:"feed",children:"RSS/Feed"}),e.jsx(a,{value:"database",children:"Datenbank"})]})]})})]})})}),q?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3,4,5,6].map(s=>e.jsxs("div",{className:"bg-white rounded-lg p-6 animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded mb-4"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded mb-2"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded mb-2"})]},s))}):o&&o.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:o.map(s=>{var t;return e.jsxs(d,{className:"hover:shadow-md transition-shadow",children:[e.jsxs(w,{children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs(S,{className:"text-lg font-semibold line-clamp-1 flex items-center gap-2",children:[z(s.status),s.name]}),B(s.status)]}),e.jsx(K,{className:"line-clamp-2",children:s.description})]}),e.jsxs(x,{children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Region:"}),e.jsx(n,{variant:"outline",children:s.region})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Typ:"}),e.jsx(n,{variant:"outline",children:s.type})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Datensätze:"}),e.jsx("span",{className:"font-medium",children:(t=s.totalRecords)==null?void 0:t.toLocaleString()})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Erfolgsrate:"}),e.jsxs("span",{className:"font-medium",children:[s.successRate,"%"]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Letzter Sync:"}),e.jsx("span",{className:"font-medium",children:new Date(s.lastSync).toLocaleDateString("de-DE")})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Frequenz:"}),e.jsx("span",{className:"font-medium",children:s.frequency})]})]}),s.coverage&&s.coverage.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx("div",{className:"text-sm text-gray-500 mb-2",children:"Abdeckung:"}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[s.coverage.slice(0,3).map((h,g)=>e.jsx(n,{variant:"outline",className:"text-xs",children:h},g)),s.coverage.length>3&&e.jsxs(n,{variant:"outline",className:"text-xs",children:["+",s.coverage.length-3," weitere"]})]})]}),s.url&&e.jsx("div",{className:"mt-4",children:e.jsxs(k,{variant:"outline",size:"sm",className:"w-full",children:[e.jsx(Q,{className:"w-4 h-4 mr-2"}),"Quelle besuchen"]})})]})]},s.id)})}):e.jsx(d,{children:e.jsxs(x,{className:"text-center py-12",children:[e.jsx(H,{className:"w-12 h-12 mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Keine Datenquellen verfügbar"}),e.jsx("p",{className:"text-gray-500",children:r!=="all"||i!=="all"||c!=="all"?"Ihre Filterkriterien ergaben keine Treffer.":"Aktuell sind keine globalen Datenquellen verfügbar."})]})})]})})]})}export{ae as default};
