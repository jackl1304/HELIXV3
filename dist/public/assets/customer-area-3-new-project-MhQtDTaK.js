import{ai as _,as as F,u as D,r as S,a as T,b as B,j as e,B as m,aC as L,C as h,c as x,d as u,v as M,q as p,e as j,a7 as i,_ as b,br as N,A as f,h as q,f as y,D as w,Q as C,T as E,F as K}from"./index-Zh9LXilC.js";function A(){const[,c]=_(),{toast:d}=F(),k=D(),[a,l]=S.useState({name:"",description:"",deviceType:"",deviceClass:"Class II",riskLevel:"medium",priority:2,selectedPathwayId:""}),{data:g=[],isLoading:I}=T({queryKey:["/api/regulatory-pathways"]}),o=B({mutationFn:async s=>{const r=await fetch("/api/projects",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s),credentials:"include"});if(!r.ok){const n=await r.json();throw new Error(n.message||"Failed to create project")}return r.json()},onSuccess:s=>{d({title:"✅ Projekt erfolgreich erstellt!",description:`${a.name} wurde mit automatisch generierten Phasen erstellt.`}),k.invalidateQueries({queryKey:["/api/projects"]}),c(`/customer-area-3/projects/${s.project.id}`)},onError:s=>{d({title:"❌ Fehler beim Erstellen",description:s.message,variant:"destructive"})}}),P=s=>{if(s.preventDefault(),!a.name||!a.deviceType||!a.selectedPathwayId){d({title:"⚠️ Pflichtfelder fehlen",description:"Bitte füllen Sie alle erforderlichen Felder aus.",variant:"destructive"});return}o.mutate({...a,regulatoryPathwayId:a.selectedPathwayId,status:"planning",startDate:new Date().toISOString()})},t=g.find(s=>s.id===a.selectedPathwayId),v=g.filter(s=>{var r,n;return((r=s.applicable_device_classes)==null?void 0:r.includes(a.deviceClass))||((n=s.applicable_device_classes)==null?void 0:n.includes("all"))});return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-purple-50",children:e.jsxs("div",{className:"container mx-auto px-6 py-8 max-w-6xl",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs(m,{variant:"ghost",onClick:()=>c("/customer-area-3/projects"),className:"mb-4",children:[e.jsx(L,{className:"h-4 w-4 mr-2"}),"Zurück zu Projekten"]}),e.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent mb-2",children:"Neues Entwicklungsprojekt"}),e.jsx("p",{className:"text-gray-600 text-lg",children:"Erstellen Sie ein neues Projekt mit intelligenter Kosten- und Zeitschätzung basierend auf echten Benchmark-Daten"})]}),e.jsxs("form",{onSubmit:P,className:"space-y-6",children:[e.jsxs(h,{className:"border-l-4 border-l-blue-500",children:[e.jsxs(x,{children:[e.jsxs(u,{className:"flex items-center gap-2",children:[e.jsx(M,{className:"h-5 w-5 text-blue-600"}),"Projekt-Grunddaten"]}),e.jsx(p,{children:"Geben Sie die grundlegenden Informationen zu Ihrem MedTech-Projekt ein"})]}),e.jsxs(j,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"name",children:"Projektname *"}),e.jsx(b,{id:"name",placeholder:"z.B. Kardiovaskuläres Monitoring System",value:a.name,onChange:s=>l({...a,name:s.target.value}),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"deviceType",children:"Device-Typ *"}),e.jsx(b,{id:"deviceType",placeholder:"z.B. Continuous Glucose Monitor",value:a.deviceType,onChange:s=>l({...a,deviceType:s.target.value}),required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"description",children:"Beschreibung"}),e.jsx("textarea",{id:"description",placeholder:"Detaillierte Beschreibung des Projekts und der geplanten Funktionalität...",value:a.description,onChange:s=>l({...a,description:s.target.value}),className:"w-full min-h-[100px] px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"deviceClass",children:"Device-Klasse"}),e.jsxs("select",{id:"deviceClass",value:a.deviceClass,onChange:s=>l({...a,deviceClass:s.target.value}),className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"Class I",children:"Class I"}),e.jsx("option",{value:"Class II",children:"Class II"}),e.jsx("option",{value:"Class IIa",children:"Class IIa"}),e.jsx("option",{value:"Class IIb",children:"Class IIb"}),e.jsx("option",{value:"Class III",children:"Class III"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"riskLevel",children:"Risiko-Level"}),e.jsxs("select",{id:"riskLevel",value:a.riskLevel,onChange:s=>l({...a,riskLevel:s.target.value}),className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"low",children:"Niedrig"}),e.jsx("option",{value:"medium",children:"Mittel"}),e.jsx("option",{value:"high",children:"Hoch"}),e.jsx("option",{value:"critical",children:"Kritisch"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"priority",children:"Priorität"}),e.jsxs("select",{id:"priority",value:a.priority,onChange:s=>l({...a,priority:parseInt(s.target.value)}),className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"1",children:"Niedrig (1)"}),e.jsx("option",{value:"2",children:"Mittel (2)"}),e.jsx("option",{value:"3",children:"Hoch (3)"}),e.jsx("option",{value:"4",children:"Sehr Hoch (4)"}),e.jsx("option",{value:"5",children:"Kritisch (5)"})]})]})]})]})]}),e.jsxs(h,{className:"border-l-4 border-l-purple-500",children:[e.jsxs(x,{children:[e.jsxs(u,{className:"flex items-center gap-2",children:[e.jsx(N,{className:"h-5 w-5 text-purple-600"}),"Intelligente Zulassungsstrategie"]}),e.jsx(p,{children:"Wählen Sie den regulatorischen Pfad basierend auf echten 2025 Benchmark-Daten (FDA, EU MDR, ISO)"})]}),e.jsx(j,{children:I?e.jsx("div",{className:"flex items-center justify-center h-32",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"})}):v.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(f,{className:"h-12 w-12 text-gray-400 mx-auto mb-3"}),e.jsxs("p",{className:"text-gray-600",children:["Keine passenden Pathways für ",a.deviceClass," verfügbar"]})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:v.map(s=>e.jsxs("div",{onClick:()=>l({...a,selectedPathwayId:s.id}),className:`cursor-pointer p-4 border-2 rounded-lg transition-all hover:shadow-md ${a.selectedPathwayId===s.id?"border-purple-500 bg-purple-50":"border-gray-200 hover:border-purple-300"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:s.name}),e.jsx(q,{variant:"outline",className:"mb-2",children:s.jurisdiction})]}),a.selectedPathwayId===s.id&&e.jsx(y,{className:"h-5 w-5 text-purple-600 flex-shrink-0"})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-3 line-clamp-2",children:s.description}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(w,{className:"h-4 w-4 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Durchschn. Kosten"}),e.jsxs("p",{className:"font-semibold text-sm",children:["$",(s.average_cost_usd/1e3).toFixed(0),"k"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(C,{className:"h-4 w-4 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Timeline"}),e.jsxs("p",{className:"font-semibold text-sm",children:[s.min_timeline_months,"-",s.max_timeline_months," Monate"]})]})]})]}),e.jsx("div",{className:"mt-3 pt-3 border-t",children:e.jsxs("p",{className:"text-xs text-gray-500",children:["Quelle: ",s.source," (",new Date(s.last_updated).getFullYear(),")"]})})]},s.id))})})]}),t&&e.jsxs(h,{className:"border-l-4 border-l-green-500 bg-gradient-to-r from-green-50 to-blue-50",children:[e.jsxs(x,{children:[e.jsxs(u,{className:"flex items-center gap-2",children:[e.jsx(E,{className:"h-5 w-5 text-green-600"}),"Automatische Projekt-Schätzung"]}),e.jsx(p,{children:"Basierend auf echten Benchmark-Daten und dem gewählten Pathway"})]}),e.jsxs(j,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(w,{className:"h-6 w-6 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Geschätzte Gesamtkosten"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["$",(t.average_cost_usd/1e3).toFixed(0),"k"]})]})]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Durchschnitt basierend auf ",t.source]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(C,{className:"h-6 w-6 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Geschätzte Timeline"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[t.average_timeline_months," Mon."]})]})]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Bereich: ",t.min_timeline_months,"-",t.max_timeline_months," Monate"]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(K,{className:"h-6 w-6 text-purple-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Automatische Phasen"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.standard_phases?Object.keys(JSON.parse(t.standard_phases)).length:0})]})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Werden automatisch generiert"})]})]}),t.key_requirements&&t.key_requirements.length>0&&e.jsxs("div",{className:"mt-4 bg-white rounded-lg p-4 shadow-sm",children:[e.jsxs("h4",{className:"font-semibold text-gray-900 mb-3 flex items-center gap-2",children:[e.jsx(f,{className:"h-4 w-4 text-amber-600"}),"Hauptanforderungen"]}),e.jsx("ul",{className:"space-y-2",children:t.key_requirements.slice(0,5).map((s,r)=>e.jsxs("li",{className:"flex items-start gap-2 text-sm text-gray-700",children:[e.jsx(y,{className:"h-4 w-4 text-green-600 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:s})]},r))})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx(m,{type:"button",variant:"outline",onClick:()=>c("/customer-area-3/projects"),children:"Abbrechen"}),e.jsx(m,{type:"submit",disabled:o.isPending||!a.selectedPathwayId,className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white px-8",children:o.isPending?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Erstelle Projekt..."]}):e.jsxs(e.Fragment,{children:[e.jsx(N,{className:"h-4 w-4 mr-2"}),"Projekt mit Phasen erstellen"]})})]})]})]})})}export{A as default};
