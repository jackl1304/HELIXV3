import{r as d,a1 as Y,ba as V,a as G,j as t,g as X,C as j,c as p,d as y,e as b,T as B,V as D,l as Q,G as Z,h as K}from"./index-Zh9LXilC.js";import{P as ee}from"./progress-DOHd-Qjm.js";import{r as $,ai as te,au as re,av as ne,z as ae,aw as ie,ax as le,ay as se,az as oe,aA as ce,aB as de,K as ue,aC as q,aD as he,aE as M,aF as me,R as S,L as xe,C as L,X as k,Y as A,T as E,a as ge,P as fe,b as ve,c as je}from"./PieChart-BsjZO9ai.js";import{B as _,a as I}from"./BarChart-BQiUWLD8.js";function C(){return C=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},C.apply(null,arguments)}function W(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function pe(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?W(Object(n),!0).forEach(function(a){ye(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function ye(e,r,n){return(r=be(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function be(e){var r=we(e,"string");return typeof r=="symbol"?r:r+""}function we(e,r){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var g=32,Ne={align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"};function Pe(e){var{data:r,iconType:n,inactiveColor:a}=e,l=g/2,o=g/6,h=g/3,m=r.inactive?a:r.color,u=n??r.type;if(u==="none")return null;if(u==="plainline"){var x;return d.createElement("line",{strokeWidth:4,fill:"none",stroke:m,strokeDasharray:(x=r.payload)===null||x===void 0?void 0:x.strokeDasharray,x1:0,y1:l,x2:g,y2:l,className:"recharts-legend-icon"})}if(u==="line")return d.createElement("path",{strokeWidth:4,fill:"none",stroke:m,d:"M0,".concat(l,"h").concat(h,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*h,",").concat(l,`
            H`).concat(g,"M").concat(2*h,",").concat(l,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(h,",").concat(l),className:"recharts-legend-icon"});if(u==="rect")return d.createElement("path",{stroke:"none",fill:m,d:"M0,".concat(g/8,"h").concat(g,"v").concat(g*3/4,"h").concat(-g,"z"),className:"recharts-legend-icon"});if(d.isValidElement(r.legendIcon)){var c=pe({},r);return delete c.legendIcon,d.cloneElement(r.legendIcon,c)}return d.createElement(ne,{fill:m,cx:l,cy:l,size:g,sizeType:"diameter",type:u})}function Oe(e){var{payload:r,iconSize:n,layout:a,formatter:l,inactiveColor:o,iconType:h}=e,m={x:0,y:0,width:g,height:g},u={display:a==="horizontal"?"inline-block":"block",marginRight:10},x={display:"inline-block",verticalAlign:"middle",marginRight:4};return r.map((c,f)=>{var w=c.formatter||l,i=Y({"recharts-legend-item":!0,["legend-item-".concat(f)]:!0,inactive:c.inactive});if(c.type==="none")return null;var s=c.inactive?o:c.color,v=w?w(c.value,c,f):c.value;return d.createElement("li",C({className:i,style:u,key:"legend-item-".concat(f)},te(e,c,f)),d.createElement(re,{width:n,height:n,viewBox:m,style:x,"aria-label":"".concat(v," legend icon")},d.createElement(Pe,{data:c,iconType:h,inactiveColor:o})),d.createElement("span",{className:"recharts-legend-item-text",style:{color:s}},v))})}var De=e=>{var r=$(e,Ne),{payload:n,layout:a,align:l}=r;if(!n||!n.length)return null;var o={padding:0,margin:0,textAlign:a==="horizontal"?l:"left"};return d.createElement("ul",{className:"recharts-default-legend",style:o},d.createElement(Oe,C({},r,{payload:n})))};function Se(){return ae(ie)}var Ee=["contextPayload"];function z(){return z=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},z.apply(null,arguments)}function H(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function P(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?H(Object(n),!0).forEach(function(a){Ce(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function Ce(e,r,n){return(r=Le(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function Le(e){var r=ke(e,"string");return typeof r=="symbol"?r:r+""}function ke(e,r){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function Ae(e,r){if(e==null)return{};var n,a,l=ze(e,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],r.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function ze(e,r){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(r.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function Re(e){return e.value}function Fe(e){var{contextPayload:r}=e,n=Ae(e,Ee),a=me(r,e.payloadUniqBy,Re),l=P(P({},n),{},{payload:a});return d.isValidElement(e.content)?d.cloneElement(e.content,l):typeof e.content=="function"?d.createElement(e.content,l):d.createElement(De,l)}function Te(e,r,n,a,l,o){var{layout:h,align:m,verticalAlign:u}=r,x,c;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(m==="center"&&h==="vertical"?x={left:((a||0)-o.width)/2}:x=m==="right"?{right:n&&n.right||0}:{left:n&&n.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(u==="middle"?c={top:((l||0)-o.height)/2}:c=u==="bottom"?{bottom:n&&n.bottom||0}:{top:n&&n.top||0}),P(P({},x),c)}function Be(e){var r=q();return d.useEffect(()=>{r(he(e))},[r,e]),null}function Ke(e){var r=q();return d.useEffect(()=>(r(M(e)),()=>{r(M({width:0,height:0}))}),[r,e]),null}function Me(e,r,n,a){return e==="vertical"&&ue(r)?{height:r}:e==="horizontal"?{width:n||a}:null}var _e={align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"};function R(e){var r=$(e,_e),n=Se(),a=le(),l=se(),{width:o,height:h,wrapperStyle:m,portal:u}=r,[x,c]=oe([n]),f=ce(),w=de();if(f==null||w==null)return null;var i=f-((l==null?void 0:l.left)||0)-((l==null?void 0:l.right)||0),s=Me(r.layout,h,o,i),v=u?m:P(P({position:"absolute",width:(s==null?void 0:s.width)||o||"auto",height:(s==null?void 0:s.height)||h||"auto"},Te(m,r,l,f,w,x)),m),N=u??a;if(N==null||n==null)return null;var O=d.createElement("div",{className:"recharts-legend-wrapper",style:v,ref:c},d.createElement(Be,{layout:r.layout,align:r.align,verticalAlign:r.verticalAlign,itemSorter:r.itemSorter}),!u&&d.createElement(Ke,{width:x.width,height:x.height}),d.createElement(Fe,z({},r,s,{margin:l,chartWidth:f,chartHeight:w,contextPayload:n})));return V.createPortal(O,N)}R.displayName="Legend";function qe(){const{data:e,isLoading:r}=G({queryKey:["/api/regulatory-updates"],queryFn:async()=>{const i=await fetch("/api/regulatory-updates?limit=500");if(!i.ok)throw new Error("Failed to fetch");return i.json()}}),n=(e==null?void 0:e.length)||0,a=(e==null?void 0:e.filter(i=>i.priority<=2).length)||0,l=(e==null?void 0:e.filter(i=>i.actionRequired).length)||0,o=(e==null?void 0:e.filter(i=>i.riskLevel==="critical").length)||0,h=e?Math.max(0,100-o*5-a*2):0,m=e?Object.entries(e.reduce((i,s)=>(i[s.jurisdiction]=(i[s.jurisdiction]||0)+1,i),{})).map(([i,s])=>({name:i,value:s})):[],u=[{name:"Critical",value:(e==null?void 0:e.filter(i=>i.riskLevel==="critical").length)||0,color:"#ef4444"},{name:"High",value:(e==null?void 0:e.filter(i=>i.riskLevel==="high").length)||0,color:"#f97316"},{name:"Medium",value:(e==null?void 0:e.filter(i=>i.riskLevel==="medium").length)||0,color:"#eab308"},{name:"Low",value:(e==null?void 0:e.filter(i=>i.riskLevel==="low").length)||0,color:"#22c55e"}],x=e?(()=>{const i=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],s=new Date,v=[];for(let N=5;N>=0;N--){const O=new Date(s.getFullYear(),s.getMonth()-N,1),U=i[O.getMonth()],J=e.filter(F=>{if(!F.publishedDate)return!1;const T=new Date(F.publishedDate);return T.getMonth()===O.getMonth()&&T.getFullYear()===O.getFullYear()}).length;v.push({month:U,count:J})}return v})():[],c=e?Object.entries(e.reduce((i,s)=>{const v=s.category||"general";return i[v]=(i[v]||0)+1,i},{})).map(([i,s])=>({name:i,value:s})).slice(0,8):[],f=i=>i>=80?"text-green-600":i>=60?"text-yellow-600":"text-red-600",w=i=>i>=80?"bg-green-100 border-green-300":i>=60?"bg-yellow-100 border-yellow-300":"bg-red-100 border-red-300";return t.jsxs("div",{className:"container mx-auto py-6 space-y-6",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold",children:"Executive Regulatory Dashboard"}),t.jsx("p",{className:"text-muted-foreground",children:"Strategic Oversight & Compliance KPIs"})]}),t.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[t.jsx(X,{className:"h-4 w-4"}),"Last Updated: ",new Date().toLocaleDateString("de-DE")]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[t.jsxs(j,{children:[t.jsx(p,{className:"pb-3",children:t.jsx(y,{className:"text-sm font-medium text-muted-foreground",children:"Total Regulations"})}),t.jsxs(b,{children:[t.jsx("div",{className:"text-3xl font-bold",children:n}),t.jsxs("div",{className:"flex items-center gap-1 mt-2 text-sm text-green-600",children:[t.jsx(B,{className:"h-4 w-4"}),t.jsx("span",{children:"Active monitoring"})]})]})]}),t.jsxs(j,{children:[t.jsx(p,{className:"pb-3",children:t.jsx(y,{className:"text-sm font-medium text-muted-foreground",children:"High Priority"})}),t.jsxs(b,{children:[t.jsx("div",{className:"text-3xl font-bold text-orange-600",children:a}),t.jsxs("div",{className:"text-sm text-muted-foreground mt-2",children:[(a/Math.max(n,1)*100).toFixed(1),"% of total"]})]})]}),t.jsxs(j,{children:[t.jsx(p,{className:"pb-3",children:t.jsx(y,{className:"text-sm font-medium text-muted-foreground",children:"Action Required"})}),t.jsxs(b,{children:[t.jsx("div",{className:"text-3xl font-bold text-blue-600",children:l}),t.jsxs("div",{className:"flex items-center gap-1 mt-2 text-sm text-muted-foreground",children:[t.jsx(D,{className:"h-4 w-4"}),t.jsx("span",{children:"Pending tasks"})]})]})]}),t.jsxs(j,{className:`border-2 ${w(h)}`,children:[t.jsx(p,{className:"pb-3",children:t.jsx(y,{className:"text-sm font-medium text-muted-foreground",children:"Compliance Score"})}),t.jsxs(b,{children:[t.jsx("div",{className:`text-3xl font-bold ${f(h)}`,children:h}),t.jsx(ee,{value:h,className:"mt-2"}),t.jsx("div",{className:"flex items-center gap-1 mt-2 text-sm",children:h>=80?t.jsxs(t.Fragment,{children:[t.jsx(Q,{className:"h-4 w-4 text-green-600"}),t.jsx("span",{className:"text-green-600",children:"Excellent"})]}):h>=60?t.jsxs(t.Fragment,{children:[t.jsx(D,{className:"h-4 w-4 text-yellow-600"}),t.jsx("span",{className:"text-yellow-600",children:"Monitor"})]}):t.jsxs(t.Fragment,{children:[t.jsx(D,{className:"h-4 w-4 text-red-600"}),t.jsx("span",{className:"text-red-600",children:"Urgent"})]})})]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs(j,{children:[t.jsx(p,{children:t.jsxs(y,{className:"flex items-center gap-2",children:[t.jsx(B,{className:"h-5 w-5"}),"Regulatory Activity Trend"]})}),t.jsx(b,{children:r?t.jsx("div",{className:"h-64 flex items-center justify-center text-muted-foreground",children:"Loading..."}):t.jsx(S,{width:"100%",height:300,children:t.jsxs(xe,{data:x,children:[t.jsx(L,{strokeDasharray:"3 3"}),t.jsx(k,{dataKey:"month"}),t.jsx(A,{}),t.jsx(E,{}),t.jsx(R,{}),t.jsx(ge,{type:"monotone",dataKey:"count",stroke:"#3b82f6",strokeWidth:2,name:"New Regulations"})]})})})]}),t.jsxs(j,{children:[t.jsx(p,{children:t.jsxs(y,{className:"flex items-center gap-2",children:[t.jsx(D,{className:"h-5 w-5"}),"Risk Distribution"]})}),t.jsx(b,{children:r?t.jsx("div",{className:"h-64 flex items-center justify-center text-muted-foreground",children:"Loading..."}):t.jsx(S,{width:"100%",height:300,children:t.jsxs(fe,{children:[t.jsx(ve,{data:u,cx:"50%",cy:"50%",labelLine:!1,label:({name:i,value:s})=>`${i}: ${s}`,outerRadius:100,fill:"#8884d8",dataKey:"value",children:u.map((i,s)=>t.jsx(je,{fill:i.color},`cell-${s}`))}),t.jsx(E,{})]})})})]})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs(j,{children:[t.jsx(p,{children:t.jsxs(y,{className:"flex items-center gap-2",children:[t.jsx(Z,{className:"h-5 w-5"}),"Jurisdictional Coverage"]})}),t.jsx(b,{children:r?t.jsx("div",{className:"h-64 flex items-center justify-center text-muted-foreground",children:"Loading..."}):t.jsx(S,{width:"100%",height:300,children:t.jsxs(_,{data:m.slice(0,10),children:[t.jsx(L,{strokeDasharray:"3 3"}),t.jsx(k,{dataKey:"name"}),t.jsx(A,{}),t.jsx(E,{}),t.jsx(R,{}),t.jsx(I,{dataKey:"value",fill:"#8b5cf6",name:"Regulations"})]})})})]}),t.jsxs(j,{children:[t.jsx(p,{children:t.jsx(y,{children:"Category Breakdown (Top 8)"})}),t.jsx(b,{children:r?t.jsx("div",{className:"h-64 flex items-center justify-center text-muted-foreground",children:"Loading..."}):t.jsx(S,{width:"100%",height:300,children:t.jsxs(_,{data:c,layout:"horizontal",children:[t.jsx(L,{strokeDasharray:"3 3"}),t.jsx(k,{type:"number"}),t.jsx(A,{type:"category",dataKey:"name",width:120}),t.jsx(E,{}),t.jsx(I,{dataKey:"value",fill:"#06b6d4"})]})})})]})]}),o>0&&t.jsxs(j,{className:"border-red-300 bg-red-50",children:[t.jsx(p,{children:t.jsxs(y,{className:"flex items-center gap-2 text-red-900",children:[t.jsx(D,{className:"h-5 w-5"}),"Critical Risk Items (",o,")"]})}),t.jsx(b,{children:t.jsx("div",{className:"space-y-2",children:e==null?void 0:e.filter(i=>i.riskLevel==="critical").slice(0,5).map(i=>t.jsx("div",{className:"p-3 bg-white rounded border border-red-200",children:t.jsxs("div",{className:"flex justify-between items-start",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("h4",{className:"font-medium line-clamp-1",children:i.title}),t.jsxs("div",{className:"flex gap-2 mt-1",children:[t.jsxs(K,{variant:"destructive",children:["P",i.priority]}),t.jsx(K,{variant:"outline",children:i.jurisdiction})]})]}),i.complianceDeadline&&t.jsxs("div",{className:"text-sm text-red-600 font-medium",children:["Deadline: ",new Date(i.complianceDeadline).toLocaleDateString("de-DE")]})]})},i.id))})})]}),t.jsxs(j,{children:[t.jsx(p,{children:t.jsx(y,{children:"Summary Statistics"})}),t.jsx(b,{children:t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[t.jsxs("div",{className:"text-center p-4 border rounded",children:[t.jsx("div",{className:"text-2xl font-bold text-blue-600",children:m.length}),t.jsx("div",{className:"text-sm text-muted-foreground mt-1",children:"Jurisdictions"})]}),t.jsxs("div",{className:"text-center p-4 border rounded",children:[t.jsx("div",{className:"text-2xl font-bold text-purple-600",children:c.length}),t.jsx("div",{className:"text-sm text-muted-foreground mt-1",children:"Categories"})]}),t.jsxs("div",{className:"text-center p-4 border rounded",children:[t.jsx("div",{className:"text-2xl font-bold text-green-600",children:(e==null?void 0:e.filter(i=>i.publishedDate&&new Date(i.publishedDate)>=new Date(Date.now()-720*60*60*1e3)).length)||0}),t.jsx("div",{className:"text-sm text-muted-foreground mt-1",children:"Last 30 Days"})]}),t.jsxs("div",{className:"text-center p-4 border rounded",children:[t.jsx("div",{className:"text-2xl font-bold text-orange-600",children:(e==null?void 0:e.filter(i=>i.complianceDeadline&&new Date(i.complianceDeadline)<=new Date(Date.now()+2160*60*60*1e3)).length)||0}),t.jsx("div",{className:"text-sm text-muted-foreground mt-1",children:"Deadlines (90d)"})]})]})})]})]})}export{qe as default};
