import{r as h,x as B,z as P,a as K,j as e,H as f,C as i,c as N,d as v,o as p,e as c,_ as M,h as g,q,g as F,G as U,B as y,w as V,i as _}from"./index-Zh9LXilC.js";import{S as b,a as w,b as C,c as S,d as l}from"./select-gtWyGZLW.js";import{C as k}from"./customer-navigation-B4gGF7xv.js";import{u as G}from"./use-live-tenant-permissions-pqtoXFLA.js";import"./index-mrnBHjv1.js";const H="030d3e01-32c4-4f95-8d54-98be948e8d4b";function Y(){const[t,L]=h.useState(""),[r,I]=h.useState("all"),[n,T]=h.useState("all"),u=B().tenantId||H,{t:D}=P(),{permissions:E,tenantName:j,isLoading:z}=G({tenantId:u,pollInterval:3e3}),a=E||{dashboard:!0,regulatoryUpdates:!0,legalCases:!0,knowledgeBase:!0,newsletters:!0,analytics:!1,reports:!1,dataCollection:!1,globalSources:!1,historicalData:!1,administration:!1,userManagement:!1,systemSettings:!1,auditLogs:!1,analyticsInsights:!1,advancedAnalytics:!1},{data:d,isLoading:A}=K({queryKey:["/api/newsletters",u],queryFn:async()=>{const s=await fetch("/api/newsletters");if(!s.ok)throw new Error("Failed to fetch newsletters");return await s.json()},enabled:!!(a!=null&&a.newsletters)});if(z)return e.jsx("div",{className:"flex h-screen bg-gray-50",children:e.jsx("div",{className:"flex items-center justify-center w-full",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})});if(!(a!=null&&a.newsletters))return e.jsxs("div",{className:"flex min-h-screen bg-gray-50 dark:bg-gray-900",children:[e.jsx("div",{className:"fixed top-4 right-4 z-50",children:e.jsx(f,{})}),e.jsx(k,{permissions:a,tenantName:j||"Customer Portal"}),e.jsx("main",{className:"ml-64 flex-1 flex items-center justify-center",children:e.jsxs(i,{className:"max-w-md",children:[e.jsx(N,{children:e.jsxs(v,{className:"flex items-center gap-2",children:[e.jsx(p,{className:"h-5 w-5"}),D("access.restricted")]})}),e.jsx(c,{children:e.jsx("p",{className:"text-muted-foreground",children:"Sie haben keine Berechtigung für den Zugriff auf Newsletter. Kontaktieren Sie Ihren Administrator für weitere Informationen."})})]})})]});const o=(d==null?void 0:d.filter(s=>{const m=s.title.toLowerCase().includes(t.toLowerCase())||s.content.toLowerCase().includes(t.toLowerCase()),x=r==="all"||s.category===r,R=n==="all"||s.region===n;return m&&x&&R}))||[];return e.jsxs("div",{className:"flex min-h-screen bg-gray-50 dark:bg-gray-900",children:[e.jsx("div",{className:"fixed top-4 right-4 z-50",children:e.jsx(f,{})}),e.jsx(k,{permissions:a,tenantName:j||"Customer Portal"}),e.jsx("main",{className:"ml-64 flex-1 p-8 overflow-y-auto",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Newsletter"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Regelmäßige Updates und Zusammenfassungen zu regulatorischen Entwicklungen"})]}),e.jsx(i,{className:"mb-6",children:e.jsx(c,{className:"p-6",children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsx("div",{children:e.jsx(M,{placeholder:"Suche nach Newslettern...",value:t,onChange:s=>L(s.target.value)})}),e.jsx("div",{children:e.jsxs(b,{value:r,onValueChange:I,children:[e.jsx(w,{children:e.jsx(C,{placeholder:"Kategorie"})}),e.jsxs(S,{children:[e.jsx(l,{value:"all",children:"Alle Kategorien"}),e.jsx(l,{value:"weekly",children:"Wöchentlich"}),e.jsx(l,{value:"monthly",children:"Monatlich"}),e.jsx(l,{value:"special",children:"Sonder-Edition"})]})]})}),e.jsx("div",{children:e.jsxs(b,{value:n,onValueChange:T,children:[e.jsx(w,{children:e.jsx(C,{placeholder:"Region"})}),e.jsxs(S,{children:[e.jsx(l,{value:"all",children:"Alle Regionen"}),e.jsx(l,{value:"eu",children:"Europa"}),e.jsx(l,{value:"usa",children:"USA"}),e.jsx(l,{value:"asia",children:"Asien"})]})]})})]})})}),A?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3,4,5,6].map(s=>e.jsxs("div",{className:"bg-white rounded-lg p-6 animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded mb-4"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded mb-2"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded mb-2"})]},s))}):o&&o.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:o.map(s=>e.jsxs(i,{className:"hover:shadow-md transition-shadow",children:[e.jsxs(N,{children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsx(v,{className:"text-lg font-semibold line-clamp-2",children:s.title}),e.jsx(g,{variant:s.priority==="high"?"destructive":"default",children:s.category})]}),e.jsx(q,{className:"line-clamp-3",children:s.summary})]}),e.jsxs(c,{children:[e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500 mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(F,{className:"w-4 h-4"}),e.jsx("span",{children:new Date(s.published_at).toLocaleDateString("de-DE")})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(U,{className:"w-4 h-4"}),e.jsx("span",{children:s.region})]})]}),e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("span",{className:"text-sm text-gray-500",children:[s.read_time," Min. Lesezeit"]}),e.jsxs(g,{variant:"outline",children:[s.downloads," Downloads"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(y,{variant:"outline",size:"sm",className:"flex-1",children:[e.jsx(V,{className:"w-4 h-4 mr-1"}),"Lesen"]}),e.jsxs(y,{variant:"outline",size:"sm",className:"flex-1",children:[e.jsx(_,{className:"w-4 h-4 mr-1"}),"PDF"]})]}),s.tags&&s.tags.length>0&&e.jsx("div",{className:"mt-3 flex flex-wrap gap-1",children:s.tags.slice(0,3).map((m,x)=>e.jsx(g,{variant:"outline",className:"text-xs",children:m},x))})]})]},s.id))}):e.jsx(i,{children:e.jsxs(c,{className:"text-center py-12",children:[e.jsx(p,{className:"w-12 h-12 mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Keine Newsletter verfügbar"}),e.jsx("p",{className:"text-gray-500",children:t||r!=="all"||n!=="all"?"Ihre Suchkriterien ergaben keine Treffer.":"Aktuell sind keine Newsletter vorhanden."})]})})]})})]})}export{Y as default};
