import{r as E,u as k,a as y,b as w,j as e,R as h,S as F,B as c,E as x,C as l,c as n,d as i,F as u,e as a,f as D,A as j,D as q,g as z,h as g,i as f}from"./index-BUxZYuNm.js";function P(){var b;const[r,S]=E.useState("all"),p=k(),{data:t,isLoading:A}=y({queryKey:["/api/legal-cases/data-quality"]}),{data:m,isLoading:C}=y({queryKey:["/api/legal-cases/incomplete",r],enabled:r!=="all"}),N=w({mutationFn:async s=>{const d=await fetch(`/api/legal-cases/${s}/fill-missing-data`,{method:"POST"});if(!d.ok)throw new Error("Fehler beim Ausfüllen");return d.json()},onSuccess:()=>{p.invalidateQueries({queryKey:["/api/legal-cases"]})}}),o=w({mutationFn:async()=>{const s=await fetch("/api/legal-cases/fill-all-missing",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jurisdiction:r})});if(!s.ok)throw new Error("Batch-Processing fehlgeschlagen");return s.json()},onSuccess:()=>{p.invalidateQueries({queryKey:["/api/legal-cases"]})}}),v=[{value:"all",label:"Alle Jurisdiktionen"},{value:"Germany",label:"Deutschland"},{value:"EU",label:"Europäische Union"},{value:"USA",label:"Vereinigte Staaten"},{value:"UK",label:"Großbritannien"},{value:"Switzerland",label:"Schweiz"}];return A?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx(h,{className:"h-8 w-8 animate-spin text-primary"})}):e.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[e.jsx(F,{className:"h-8 w-8 text-blue-600"}),"Rechtsprechungs-Daten-Analyse"]}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Datenqualität überprüfen und fehlende Informationen ergänzen"})]}),e.jsxs(c,{onClick:()=>o.mutate(),disabled:o.isPending,className:"bg-blue-600 hover:bg-blue-700",children:[o.isPending?e.jsx(h,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx(x,{className:"h-4 w-4 mr-2"}),"Alle Ausfüllen"]})]}),t&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(l,{children:[e.jsx(n,{className:"pb-3",children:e.jsxs(i,{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(u,{className:"h-4 w-4 text-blue-600"}),"Gesamt"]})}),e.jsxs(a,{children:[e.jsx("div",{className:"text-3xl font-bold",children:t.totalCases}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Rechtsfälle"})]})]}),e.jsxs(l,{children:[e.jsx(n,{className:"pb-3",children:e.jsxs(i,{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(D,{className:"h-4 w-4 text-green-600"}),"Vollständig"]})}),e.jsxs(a,{children:[e.jsx("div",{className:"text-3xl font-bold text-green-600",children:t.completeCases}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[Math.round(t.completeCases/t.totalCases*100),"% komplett"]})]})]}),e.jsxs(l,{children:[e.jsx(n,{className:"pb-3",children:e.jsxs(i,{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(j,{className:"h-4 w-4 text-orange-600"}),"Unvollständig"]})}),e.jsxs(a,{children:[e.jsx("div",{className:"text-3xl font-bold text-orange-600",children:t.incompleteCases}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Benötigen Ergänzung"})]})]}),e.jsxs(l,{children:[e.jsx(n,{className:"pb-3",children:e.jsxs(i,{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(x,{className:"h-4 w-4 text-purple-600"}),"Durchschnitt"]})}),e.jsxs(a,{children:[e.jsxs("div",{className:"text-3xl font-bold text-purple-600",children:[Math.round(t.avgCompleteness),"%"]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Datenqualität"})]})]})]}),t&&e.jsxs(l,{children:[e.jsx(n,{children:e.jsxs(i,{className:"flex items-center gap-2",children:[e.jsx(j,{className:"h-5 w-5 text-orange-600"}),"Fehlende Datenfelder"]})}),e.jsx(a,{children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"flex flex-col items-center p-4 bg-muted rounded-lg",children:[e.jsx(u,{className:"h-8 w-8 text-orange-600 mb-2"}),e.jsx("div",{className:"text-2xl font-bold",children:t.missingFields.summary}),e.jsx("div",{className:"text-xs text-center text-muted-foreground mt-1",children:"Zusammenfassungen fehlen"})]}),e.jsxs("div",{className:"flex flex-col items-center p-4 bg-muted rounded-lg",children:[e.jsx(x,{className:"h-8 w-8 text-orange-600 mb-2"}),e.jsx("div",{className:"text-2xl font-bold",children:t.missingFields.content}),e.jsx("div",{className:"text-xs text-center text-muted-foreground mt-1",children:"Inhalte fehlen"})]}),e.jsxs("div",{className:"flex flex-col items-center p-4 bg-muted rounded-lg",children:[e.jsx(F,{className:"h-8 w-8 text-orange-600 mb-2"}),e.jsx("div",{className:"text-2xl font-bold",children:t.missingFields.verdict}),e.jsx("div",{className:"text-xs text-center text-muted-foreground mt-1",children:"Urteile fehlen"})]}),e.jsxs("div",{className:"flex flex-col items-center p-4 bg-muted rounded-lg",children:[e.jsx(q,{className:"h-8 w-8 text-orange-600 mb-2"}),e.jsx("div",{className:"text-2xl font-bold",children:t.missingFields.damages}),e.jsx("div",{className:"text-xs text-center text-muted-foreground mt-1",children:"Schadensersatz fehlt"})]}),e.jsxs("div",{className:"flex flex-col items-center p-4 bg-muted rounded-lg",children:[e.jsx(z,{className:"h-8 w-8 text-orange-600 mb-2"}),e.jsx("div",{className:"text-2xl font-bold",children:t.missingFields.decisionDate}),e.jsx("div",{className:"text-xs text-center text-muted-foreground mt-1",children:"Datum fehlt"})]})]})})]}),e.jsxs(l,{children:[e.jsx(n,{children:e.jsx(i,{children:"Unvollständige Fälle nach Jurisdiktion"})}),e.jsx(a,{children:e.jsx("div",{className:"flex flex-wrap gap-2",children:v.map(s=>e.jsx(c,{variant:r===s.value?"default":"outline",size:"sm",onClick:()=>S(s.value),children:s.label},s.value))})})]}),r!=="all"&&e.jsx("div",{className:"space-y-4",children:C?e.jsx(l,{children:e.jsx(a,{className:"flex items-center justify-center py-12",children:e.jsx(h,{className:"h-8 w-8 animate-spin text-primary"})})}):m&&m.length>0?m.map(s=>e.jsxs(l,{className:"border-l-4 border-l-orange-500",children:[e.jsx(n,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(i,{className:"text-lg",children:s.title}),e.jsxs("div",{className:"flex items-center gap-2 mt-2 text-sm text-muted-foreground",children:[e.jsx(g,{variant:"outline",children:s.jurisdiction}),e.jsx("span",{children:"•"}),e.jsx("span",{children:s.court}),s.caseNumber&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"•"}),e.jsx("span",{children:s.caseNumber})]})]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-2",children:[e.jsxs(g,{variant:s.completeness>=80?"default":"destructive",className:"text-lg px-3 py-1",children:[Math.round(s.completeness),"%"]}),e.jsxs(c,{size:"sm",onClick:()=>N.mutate(s.id),disabled:N.isPending,children:[e.jsx(x,{className:"h-3 w-3 mr-1"}),"Ausfüllen"]})]})]})}),e.jsx(a,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium mb-2",children:"Fehlende Felder:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.missingFields.map(d=>e.jsxs(g,{variant:"secondary",className:"text-xs",children:[e.jsx(j,{className:"h-3 w-3 mr-1"}),d]},d))})]}),s.summary&&e.jsxs("div",{className:"text-sm text-muted-foreground border-l-2 border-gray-300 pl-3",children:[s.summary.substring(0,200),s.summary.length>200&&"..."]})]})})]},s.id)):e.jsx(l,{children:e.jsxs(a,{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(D,{className:"h-12 w-12 text-green-600 mb-4"}),e.jsx("div",{className:"text-lg font-medium",children:"Alle Fälle vollständig!"}),e.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:["Keine unvollständigen Fälle in ",(b=v.find(s=>s.value===r))==null?void 0:b.label]})]})})}),e.jsxs(l,{children:[e.jsx(n,{children:e.jsxs(i,{className:"flex items-center gap-2",children:[e.jsx(f,{className:"h-5 w-5"}),"Export & Dokumentation"]})}),e.jsxs(a,{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Exportiere Datenqualitäts-Bericht für Compliance und Audit-Zwecke"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(c,{variant:"outline",children:[e.jsx(f,{className:"h-4 w-4 mr-2"}),"Export als CSV"]}),e.jsxs(c,{variant:"outline",children:[e.jsx(f,{className:"h-4 w-4 mr-2"}),"Export als PDF"]}),e.jsxs(c,{variant:"outline",children:[e.jsx(u,{className:"h-4 w-4 mr-2"}),"Vollständiger Bericht"]})]})]})]})]})}function M(){return e.jsx(P,{})}export{M as default};
