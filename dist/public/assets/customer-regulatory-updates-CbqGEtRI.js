import{x as u,a as f,j as e,C as t,c as j,d as p,h as l,q as y,e as n,G as v,g as N,F as b}from"./index-BUxZYuNm.js";import{C as w}from"./customer-navigation-B-CG8ezh.js";import{u as C}from"./use-live-tenant-permissions-CteBuFiC.js";import{u as k}from"./customer-theme-context-BLxT9dVT.js";const L="030d3e01-32c4-4f95-8d54-98be948e8d4b";function B(){const{themeSettings:U,getThemeColors:i}=k();i();const d=u().tenantId||L,{permissions:c,tenantName:o,isLoading:m}=C({tenantId:d,pollInterval:3e3}),a=c||{dashboard:!0,regulatoryUpdates:!0,legalCases:!1,knowledgeBase:!1,newsletters:!1,analytics:!1,reports:!1,dataCollection:!1,globalSources:!1,historicalData:!1,administration:!1,userManagement:!1,systemSettings:!1,auditLogs:!1,analyticsInsights:!1,advancedAnalytics:!1},{data:r,isLoading:x}=f({queryKey:["/api/regulatory-updates/recent"],queryFn:async()=>{const s=await fetch("/api/regulatory-updates/recent");if(!s.ok)throw new Error("Failed to fetch regulatory updates");return await s.json()},enabled:!!(a!=null&&a.regulatoryUpdates)});return m?e.jsx("div",{className:"flex h-screen bg-gray-50",children:e.jsx("div",{className:"flex items-center justify-center w-full",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})}):e.jsxs("div",{className:"flex h-screen bg-gray-50",children:[e.jsx(w,{permissions:a,tenantName:o||"Customer Portal"}),e.jsx("main",{className:"ml-64 flex-1 p-8 overflow-y-auto",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Regulatory Updates"}),e.jsx("p",{className:"text-gray-600",children:"Aktuelle regulatorische Änderungen und Updates"})]}),x?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3].map(s=>e.jsxs("div",{className:"bg-white rounded-lg p-6 animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded mb-4"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded mb-2"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded mb-2"})]},s))}):r&&Array.isArray(r)&&r.length>0?e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:r.map(s=>e.jsxs(t,{className:"hover:shadow-md transition-shadow",children:[e.jsxs(j,{children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsx(p,{className:"text-lg font-semibold line-clamp-2",children:s.title}),e.jsx(l,{variant:s.priority==="high"?"destructive":"default",children:s.priority})]}),e.jsx(y,{className:"line-clamp-2",children:s.summary})]}),e.jsxs(n,{children:[e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(v,{className:"w-4 h-4"}),e.jsx("span",{children:s.region})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(N,{className:"w-4 h-4"}),e.jsx("span",{children:new Date(s.published_date).toLocaleDateString("de-DE")})]})]}),s.device_types&&e.jsx("div",{className:"mt-3 flex flex-wrap gap-1",children:s.device_types.slice(0,3).map((h,g)=>e.jsx(l,{variant:"outline",className:"text-xs",children:h},g))}),s.source_url&&e.jsx("div",{className:"mt-2",children:e.jsxs("a",{href:s.source_url,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-700 hover:text-blue-900 underline inline-flex items-center gap-1",title:"Direkte Quelle öffnen",children:["Quelle",e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-3 w-3",children:[e.jsx("path",{d:"M18 13v6a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}),e.jsx("path",{d:"M15 3h6v6"}),e.jsx("path",{d:"M10 14 21 3"})]})]})})]})]},s.id))}):e.jsx(t,{children:e.jsxs(n,{className:"text-center py-12",children:[e.jsx(b,{className:"w-12 h-12 mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Keine Regulatory Updates verfügbar"}),e.jsx("p",{className:"text-gray-500",children:"Aktuell sind keine regulatorischen Updates vorhanden."})]})})]})})]})}export{B as default};
