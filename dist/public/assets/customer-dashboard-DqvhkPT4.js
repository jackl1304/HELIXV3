import{x as F,a as E,r as J,y as V,j as e,C as i,c as d,d as x,q as N,e as c,B as o,z as H,H as X,h as g,I as L,l as R,J as Y,i as O,K as _,N as D,k as M,O as C,U as ee,v as se,p as ae,G as te,Q as ne,F as le,V as P,L as re,T as ie,W as U,X as q,Y as ce}from"./index-BUxZYuNm.js";import{P as k}from"./progress-C0uVNcle.js";import{S as de,a as xe,b as me,c as oe,d as f}from"./select-Dxhz2xZH.js";import{C as he}from"./customer-navigation-B-CG8ezh.js";import{R as B,L as ue,C as ge,X as je,Y as pe,T as $,a as I,P as Ne,b as fe,c as ve}from"./PieChart-Bn00ARAz.js";import"./index-NLfbe9Ak.js";function ye(){const m=F(),h=m==null?void 0:m.tenantId,{data:l,isLoading:v,error:y}=E({queryKey:[`/api/tenant/${h}/settings`],enabled:!!h});return{tenantId:h,settings:l,permissions:l==null?void 0:l.permissions,isLoading:v,error:y,hasPermission:s=>{var u;return((u=l==null?void 0:l.permissions)==null?void 0:u[s])===!0},subscriptionPlan:l==null?void 0:l.subscriptionPlan}}const be="030d3e01-32c4-4f95-8d54-98be948e8d4b",we=[{month:"Jan",dataRequests:1850,apiCalls:420},{month:"Feb",dataRequests:2100,apiCalls:380},{month:"Mar",dataRequests:1950,apiCalls:450},{month:"Apr",dataRequests:2300,apiCalls:520},{month:"May",dataRequests:2200,apiCalls:480},{month:"Jun",dataRequests:2400,apiCalls:550},{month:"Jul",dataRequests:2150,apiCalls:490},{month:"Aug",dataRequests:1247,apiCalls:312}],Ce=[{region:"USA (FDA)",score:95,alerts:2,trend:"up"},{region:"EU (EMA)",score:88,alerts:5,trend:"stable"},{region:"Asia-Pacific",score:92,alerts:1,trend:"up"}],A=[{name:"USA",value:45,color:"#3B82F6"},{name:"Europa",value:35,color:"#8B5CF6"},{name:"Asien",value:20,color:"#10B981"}];function Pe(){const[m,h]=J.useState("30d"),l=F(),{logout:v}=V(),y=l.tenantId||be,{permissions:s,isLoading:u,hasPermission:K}=ye();if(!u&&!K("dashboard"))return e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:e.jsxs(i,{className:"max-w-md",children:[e.jsxs(d,{children:[e.jsx(x,{children:"Zugriff verweigert"}),e.jsx(N,{children:"Sie haben keine Berechtigung für das Dashboard."})]}),e.jsxs(c,{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Bitte kontaktieren Sie Ihren Administrator."}),e.jsx(o,{onClick:()=>window.history.back(),children:"Zurück"})]})]})});const{data:a,isLoading:z}=E({queryKey:["/api/customer/dashboard",y,m],queryFn:async()=>({usage:{currentMonth:1247,limit:2500,percentage:50,users:12,userLimit:25,apiCalls:312,apiLimit:1e3},dashboard:{regulatoryUpdates:{total:1247,thisMonth:312,critical:23,regions:{US:498,EU:436,Asia:313}},compliance:{score:92,alerts:8,upcoming:15,resolved:156},analytics:{riskTrend:"decreasing",engagement:89,efficiency:94,dataQuality:98}}})}),j=({title:t,value:n,change:p,changeType:r,icon:Z,description:S,color:b="blue",href:w})=>{const G=r==="increase"?e.jsx(ce,{className:"h-3 w-3"}):r==="decrease"?e.jsx(U,{className:"h-3 w-3"}):e.jsx(q,{className:"h-3 w-3"}),Q=r==="increase"?"text-green-600":r==="decrease"?"text-red-600":"text-gray-500",T=e.jsx(i,{className:w?"cursor-pointer hover:shadow-lg hover:scale-105 transition-all duration-200":"",children:e.jsxs(c,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:t}),e.jsx("div",{className:"text-2xl font-bold",children:n}),p&&e.jsxs("p",{className:`text-xs ${Q} flex items-center gap-1 mt-1`,children:[G,p]})]}),e.jsx("div",{className:`h-12 w-12 rounded-lg bg-${b}-100 dark:bg-${b}-900/20 flex items-center justify-center`,children:e.jsx(Z,{className:`h-6 w-6 text-${b}-600`})})]}),S&&e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:S})]})});return w?e.jsx(re,{href:w,children:T}):T},W=({region:t,score:n,alerts:p,trend:r})=>e.jsx(i,{className:"hover:shadow-md transition-shadow",children:e.jsxs(c,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"font-medium",children:t}),e.jsxs(g,{className:r==="up"?"bg-green-100 text-green-800":r==="down"?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800",children:[r==="up"?e.jsx(ie,{className:"w-3 h-3 mr-1"}):r==="down"?e.jsx(U,{className:"w-3 h-3 mr-1"}):e.jsx(q,{className:"w-3 h-3 mr-1"}),r]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Compliance Score"}),e.jsxs("span",{className:"font-medium",children:[n,"%"]})]}),e.jsx(k,{value:n,className:"h-2"}),e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[e.jsxs("span",{children:[p," aktive Warnungen"]}),e.jsx("span",{children:n>=90?"Excellent":n>=80?"Good":"Needs Attention"})]})]})]})});if(z||u)return e.jsx("div",{className:"container mx-auto p-6 space-y-8 max-w-7xl",children:e.jsxs("div",{className:"animate-pulse space-y-4",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4"}),e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-4",children:Array.from({length:4}).map((t,n)=>e.jsx("div",{className:"h-32 bg-gray-200 rounded"},n))})]})});const{t:ke}=H();return e.jsxs("div",{className:"flex min-h-screen bg-gray-50 dark:bg-gray-900 relative",children:[e.jsx("div",{className:"fixed top-4 right-4 z-50",children:e.jsx(X,{})}),e.jsx(he,{permissions:s,tenantName:liveTenantName}),e.jsx("div",{className:"flex-1 ml-64",children:e.jsxs("div",{className:"container mx-auto p-6 space-y-8 max-w-7xl",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-2",children:"Kunden-Dashboard"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-500 via-purple-600 to-cyan-700 rounded-lg flex items-center justify-center text-white font-bold text-sm",children:(liveTenantName==null?void 0:liveTenantName.charAt(0))||"M"}),e.jsx("span",{className:"font-medium",children:liveTenantName||"MedTech Solutions GmbH"})]}),e.jsxs(g,{className:"bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-200",children:[e.jsx(L,{className:"w-3 h-3 mr-1"}),"Professional Plan"]}),e.jsxs(g,{className:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-200",children:[e.jsx(R,{className:"w-3 h-3 mr-1"}),"Active"]})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(de,{value:m,onValueChange:h,children:[e.jsx(xe,{className:"w-32",children:e.jsx(me,{})}),e.jsxs(oe,{children:[e.jsx(f,{value:"7d",children:"7 Tage"}),e.jsx(f,{value:"30d",children:"30 Tage"}),e.jsx(f,{value:"90d",children:"90 Tage"}),e.jsx(f,{value:"12m",children:"12 Monate"})]})]}),e.jsxs(o,{variant:"outline",children:[e.jsx(Y,{className:"w-4 h-4 mr-2"}),"Support Chat"]}),e.jsxs(o,{variant:"outline",children:[e.jsx(O,{className:"w-4 h-4 mr-2"}),"Export"]}),e.jsxs(o,{children:[e.jsx(_,{className:"w-4 h-4 mr-2"}),"Einstellungen"]}),e.jsxs(o,{variant:"outline",onClick:()=>{v(),window.location.reload()},children:[e.jsx(D,{className:"w-4 h-4 mr-2"}),"Abmelden"]})]})]}),(s==null?void 0:s.dashboard)&&e.jsxs("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-4",children:[e.jsx(j,{title:"Monatliche Nutzung",value:`${a==null?void 0:a.usage.currentMonth.toLocaleString()} / ${a==null?void 0:a.usage.limit.toLocaleString()}`,change:"+8.2%",changeType:"increase",icon:M,description:`${a==null?void 0:a.usage.percentage}% vom Limit verbraucht`,color:"blue",href:"/regulatory-updates"}),e.jsx(j,{title:"Compliance Score",value:`${a==null?void 0:a.dashboard.compliance.score}%`,change:"+2.1%",changeType:"increase",icon:C,description:`${a==null?void 0:a.dashboard.compliance.alerts} aktive Warnungen`,color:"green",href:"/analytics"}),(s==null?void 0:s.userManagement)&&e.jsx(j,{title:"Aktive Benutzer",value:`${a==null?void 0:a.usage.users} / ${a==null?void 0:a.usage.userLimit}`,change:"Stabil",changeType:"stable",icon:ee,description:"Team-Nutzung im Rahmen",color:"purple",href:"/user-management"}),(s==null?void 0:s.analytics)&&e.jsx(j,{title:"Data Quality",value:`${a==null?void 0:a.dashboard.analytics.dataQuality}%`,change:"+1.3%",changeType:"increase",icon:se,description:"Datenqualität hervorragend",color:"orange",href:"/analytics"})]}),(s==null?void 0:s.analytics)&&e.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[e.jsxs(i,{children:[e.jsxs(d,{children:[e.jsxs(x,{className:"flex items-center gap-2",children:[e.jsx(ae,{className:"h-5 w-5"}),"Nutzungstrend"]}),e.jsx(N,{children:"Monatliche Datenabfragen und API-Calls"})]}),e.jsx(c,{children:e.jsx(B,{width:"100%",height:300,children:e.jsxs(ue,{data:we,children:[e.jsx(ge,{strokeDasharray:"3 3"}),e.jsx(je,{dataKey:"month"}),e.jsx(pe,{}),e.jsx($,{}),e.jsx(I,{type:"monotone",dataKey:"dataRequests",stroke:"#3B82F6",strokeWidth:2}),e.jsx(I,{type:"monotone",dataKey:"apiCalls",stroke:"#8B5CF6",strokeWidth:2})]})})})]}),e.jsxs(i,{children:[e.jsxs(d,{children:[e.jsxs(x,{className:"flex items-center gap-2",children:[e.jsx(te,{className:"h-5 w-5"}),"Regionale Verteilung"]}),e.jsx(N,{children:"Anteil der Updates nach Regionen"})]}),e.jsxs(c,{children:[e.jsx(B,{width:"100%",height:300,children:e.jsxs(Ne,{children:[e.jsx(fe,{data:A,cx:"50%",cy:"50%",innerRadius:60,outerRadius:120,paddingAngle:5,dataKey:"value",children:A.map((t,n)=>e.jsx(ve,{fill:t.color},`cell-${n}`))}),e.jsx($,{})]})}),e.jsx("div",{className:"flex justify-center gap-4 mt-4",children:A.map((t,n)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded",style:{backgroundColor:t.color}}),e.jsx("span",{className:"text-sm",children:t.name})]},n))})]})]})]}),(s==null?void 0:s.regulatoryUpdates)&&e.jsxs(i,{children:[e.jsxs(d,{children:[e.jsxs(x,{className:"flex items-center gap-2",children:[e.jsx(C,{className:"h-5 w-5"}),"Compliance-Übersicht"]}),e.jsx(N,{children:"Regionale Compliance-Scores und aktuelle Warnungen"})]}),e.jsx(c,{children:e.jsx("div",{className:"grid gap-4 md:grid-cols-3",children:Ce.map((t,n)=>e.jsx(W,{...t},n))})})]}),((s==null?void 0:s.dashboard)||(s==null?void 0:s.auditLogs))&&e.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[e.jsxs(i,{children:[e.jsx(d,{children:e.jsxs(x,{className:"flex items-center gap-2",children:[e.jsx(ne,{className:"h-5 w-5"}),"Aktuelle Aktivitäten"]})}),e.jsx(c,{children:e.jsx("div",{className:"space-y-4",children:[{action:"Neue FDA 510(k) Zulassung",time:"2 Stunden",type:"approval",critical:!1},{action:"EU MDR Update verfügbar",time:"5 Stunden",type:"update",critical:!0},{action:"API-Limit zu 75% erreicht",time:"1 Tag",type:"warning",critical:!1},{action:"Compliance-Score aktualisiert",time:"2 Tage",type:"info",critical:!1}].map((t,n)=>e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-100 last:border-b-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[t.type==="approval"&&e.jsx(R,{className:"h-4 w-4 text-green-500"}),t.type==="update"&&e.jsx(le,{className:"h-4 w-4 text-blue-500"}),t.type==="warning"&&e.jsx(P,{className:"h-4 w-4 text-yellow-500"}),t.type==="info"&&e.jsx(M,{className:"h-4 w-4 text-gray-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:t.action}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["vor ",t.time]})]})]}),t.critical&&e.jsx(g,{variant:"destructive",className:"text-xs",children:"Kritisch"})]},n))})})]}),e.jsxs(i,{children:[e.jsx(d,{children:e.jsxs(x,{className:"flex items-center gap-2",children:[e.jsx(P,{className:"h-5 w-5"}),"Aktive Warnungen"]})}),e.jsx(c,{children:e.jsx("div",{className:"space-y-4",children:[{title:"EU MDR Deadline approaching",severity:"high",date:"2025-08-15"},{title:"FDA Cybersecurity Requirements",severity:"medium",date:"2025-09-01"},{title:"API Rate Limit Warning",severity:"low",date:"2025-08-12"}].map((t,n)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-red-50 dark:bg-red-950/20 rounded-lg border border-red-200 dark:border-red-800",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${t.severity==="high"?"bg-red-500":t.severity==="medium"?"bg-yellow-500":"bg-blue-500"}`}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:t.title}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Fällig: ",t.date]})]})]}),e.jsx(g,{className:t.severity==="high"?"bg-red-100 text-red-800":t.severity==="medium"?"bg-yellow-100 text-yellow-800":"bg-blue-100 text-blue-800",children:t.severity})]},n))})})]})]}),((s==null?void 0:s.administration)||(s==null?void 0:s.systemSettings))&&e.jsxs(i,{children:[e.jsx(d,{children:e.jsxs(x,{className:"flex items-center gap-2",children:[e.jsx(L,{className:"h-5 w-5"}),"Subscription Status"]})}),e.jsx(c,{children:e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-4",children:"Current Plan: Professional"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Monatliche Updates"}),e.jsxs("span",{className:"text-sm font-medium",children:[a==null?void 0:a.usage.currentMonth," / 2.500"]})]}),e.jsx(k,{value:a==null?void 0:a.usage.percentage}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Team-Mitglieder"}),e.jsxs("span",{className:"text-sm font-medium",children:[(a==null?void 0:a.usage.users)||0," / ",(a==null?void 0:a.usage.userLimit)||0]})]}),e.jsx(k,{value:((a==null?void 0:a.usage.users)||0)/((a==null?void 0:a.usage.userLimit)||1)*100})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-4",children:"Nächste Abrechnung"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Betrag"}),e.jsx("span",{className:"text-lg font-bold",children:"€899"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Datum"}),e.jsx("span",{className:"text-sm font-medium",children:"31.08.2025"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Zahlungsart"}),e.jsx("span",{className:"text-sm",children:"**** 1234"})]})]}),e.jsx(o,{className:"w-full mt-4",variant:"outline",children:"Plan verwalten"})]})]})})]}),!(s!=null&&s.dashboard)&&!(s!=null&&s.analytics)&&!(s!=null&&s.regulatoryUpdates)&&!(s!=null&&s.administration)&&!(s!=null&&s.systemSettings)&&!(s!=null&&s.auditLogs)&&e.jsx(i,{className:"text-center py-12",children:e.jsxs(c,{children:[e.jsx(C,{className:"w-16 h-16 mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Zugriff beschränkt"}),e.jsx("p",{className:"text-gray-600 max-w-md mx-auto",children:"Ihr Administrator hat den Zugriff auf diese Dashboard-Bereiche beschränkt. Kontaktieren Sie Ihren Administrator, um weitere Berechtigungen zu erhalten."})]})})]})})]})}export{Pe as default};
