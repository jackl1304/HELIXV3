import{r as o,a as l}from"./index-Zh9LXilC.js";function d({tenantId:s,pollInterval:c=3e3}){const[t,u]=o.useState(null),[r,m]=o.useState(""),{data:a,isLoading:f,error:h}=l({queryKey:["/api/customer/tenant",s],queryFn:async()=>{const e=await fetch(`/api/customer/tenant/${s}`);if(!e.ok)throw new Error(`Failed to fetch tenant data: ${e.status}`);return await e.json()},refetchInterval:c,enabled:!!s});return o.useEffect(()=>{if(a){const e=a.customerPermissions,i=a.name;(!e||!t||Object.keys(e).some(n=>e[n]!==t[n])||Object.keys(t).some(n=>t[n]!==e[n]))&&(u(e),console.log("[LIVE PERMISSIONS] Updated for tenant:",s,e)),i!==r&&m(i)}},[a,s]),{permissions:t,tenantName:r,isLoading:f,error:h,refetch:()=>{window.location.reload()}}}export{d as u};
